import{_ as V,i as h,r as m,c as b,a as o,b as l,k as n,I as y,e as p,G as f,J as C,d as _,H as k,o as z,f as g,t as P,C as i}from"./index-BNfsHRSS.js";import{a as v}from"./index-DvJ3witA.js";const I={class:"registe-container"},U={class:"registe-box"},B={class:"registe-form"},E={class:"registe-form-item"},N={class:"registe-form-item"},T={class:"registe-form-item"},G={class:"registe-form-item"},S={class:"code-box"},D={class:"registe-form-item"},F={__name:"index",setup(H){k();const e=h({email:"",password:"",confirmPassword:"",code:""}),c=m(""),t=m(0),x=async()=>{if(e.email===""){i.error("请输入邮箱");return}const r=await v({method:"GET",url:"http://localhost:8080/generateCode",params:{to:e.email}});r.data.code==="200"&&(c.value=r.data.data),t.value=60;const s=setInterval(()=>{t.value--,t.value===0&&clearInterval(s)},1e3)},w=async()=>{if(e.email===""){i.error("请输入邮箱");return}if(e.password!==e.confirmPassword){i.error("两次密码输入不一致");return}if(e.code!==c.value){i.error("验证码错误");return}const r=await v({method:"POST",url:"http://localhost:8080/api/user/registe",data:{account:e.email,password:e.password}});if(console.log(r.data),r.data.code==="200"){i.success("注册成功，请登录"),window.location.href="/stellerprofile/login";return}i.error("注册失败")};return(r,s)=>{const d=p("el-input"),u=p("el-button");return z(),b("div",I,[o("div",U,[s[5]||(s[5]=o("div",{class:"registe-header"},[o("h1",{class:"auth-title"},"注册新账号"),o("p",{class:"auth-subtitle"},"开启您的星简界之旅")],-1)),o("div",B,[o("div",E,[l(d,{modelValue:e.email,"onUpdate:modelValue":s[0]||(s[0]=a=>e.email=a),placeholder:"请输入邮箱账号","prefix-icon":n(y),size:"large"},null,8,["modelValue","prefix-icon"])]),o("div",N,[l(d,{modelValue:e.password,"onUpdate:modelValue":s[1]||(s[1]=a=>e.password=a),placeholder:"请输入密码","prefix-icon":n(f),type:"password",size:"large"},null,8,["modelValue","prefix-icon"])]),o("div",T,[l(d,{modelValue:e.confirmPassword,"onUpdate:modelValue":s[2]||(s[2]=a=>e.confirmPassword=a),placeholder:"请再次输入密码","prefix-icon":n(f),type:"password",size:"large"},null,8,["modelValue","prefix-icon"])]),o("div",G,[o("span",S,[l(d,{modelValue:e.code,"onUpdate:modelValue":s[3]||(s[3]=a=>e.code=a),placeholder:"请输入验证码","prefix-icon":n(C),size:"large"},null,8,["modelValue","prefix-icon"]),l(u,{class:"code-btn",disabled:t.value>0,onClick:x},{default:_(()=>[g(P(t.value>0?`重新获取(${t.value})`:"获取验证码"),1)]),_:1},8,["disabled"])])]),o("div",D,[l(u,{class:"registe-btn",type:"primary",onClick:w,size:"large"},{default:_(()=>s[4]||(s[4]=[g("注册")])),_:1})])])])])}}},O=V(F,[["__scopeId","data-v-578b16e4"]]);export{O as default};
